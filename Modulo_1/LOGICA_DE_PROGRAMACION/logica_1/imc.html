<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>IMC</title>
</head>

<body>
    <h1>Calcular IMC</h1>
    <script>
        let br = "<br />", name = "";
        let myArray = [];
        let sum = 0, average = 0, count = 0, weight = 0, height = 0;

        function jumpLine() {
            document.write(br.repeat(2));
        }

        function toPrint(text) {
            document.write(text);
            jumpLine();
        }

        function calculateBMI(personName, weight, height) {
            let imc = weight / Math.pow(height, 2);
            myArray.push(imc)
            return { personName, imc }  // return object {personName: "string", imc: number}
        }

        /*
            this function is done to loop through an array and get an average of that same array,
            when there is more than one person whose BMI is calculated. 
        */
        function arraySum(array) {
            for (let i = 0; i < array.length; i++) {
                sum = sum + array[i]
            }
            return sum / array.length;
        }

        count = prompt("Ingrese el nÃºmero de personas a calcular su IMC")
        for (let j = 1; j <= count; j++) {
            name = prompt(`Persona # ${j} Ingrese su nombre`);
            weight = parseInt(prompt(`${name}, Ingrese su peso`));
            height = parseInt(prompt(`${name}, Ingrese su altura`));

            const personIMC = calculateBMI(name, weight, height)  // personIMC is a object {personName: "string", imc: number}, the last value entered.
            toPrint(`El IMC de ${personIMC.personName} es: ${personIMC.imc.toFixed(2)}, su peso es: ${weight}Kg y su estarura ${height}Mts`)
            if (personIMC.imc < 18.5) {
                toPrint(`IMC inferior al normal ${personIMC.imc.toFixed(2)}`)
            }else if(personIMC.imc >= 18.5 && personIMC.imc < 25){
                toPrint(`IMC normal ${personIMC.imc.toFixed(2)}`)
            }else if(personIMC.imc >= 25 && personIMC.imc < 30){
                toPrint(`IMC superior al normal ${personIMC.imc.toFixed(2)}`)
            }else {
                toPrint(`IMC Obesidad ${personIMC.imc.toFixed(2)}`)
            }
            toPrint("######################################");
        }
        average = arraySum(myArray).toFixed(2);
        toPrint(`Promedio de IMC ${average}`)
    </script>
</body>

</html>